var e=new class{constructor(){}render(){document.querySelector("#root").insertAdjacentHTML("afterbegin",'\n      <nav class="tabbar">\n        <div class="nav_left">\n          <a href="/home" class="nav_item"><img src="../img/home.svg" alt="Home" class="nav_img"></a>\n          <a href="/chat" class="nav_item"><img src="../img/chat.svg" alt="Chat" class="nav_img"></a>\n        </div>\n        <div class="nav_middle">\n          <a href="/add" class="nav_item_raised"><img src="../img/add.svg" alt="Plus" class="nav_img_raised"></a>\n        </div>\n        <div class="nav_right">\n          <a href="/favourites" class="nav_item"><img src="../img/fav.svg" alt="Heart" class="nav_img"></a>\n          <a href="/profile" class="nav_item"><img src="../img/profile.svg" alt="Profile" class="nav_img"></a>\n        </div>\n      </nav>\n    ')}};var n=new class{constructor(){this.listings=[],this.baseUrl=""}async getListings(){const e=`${this.baseUrl}?action=getListings`,n=await fetch(e),t=await n.json();return this.listings=t,this.listings}async getUser(e){const n=`${this.baseUrl}?action=getUser&userId=${e}`,t=await fetch(n);return await t.json()}async uploadImage(e){let n=new FormData;n.append("fileToUpload",e);const t=await fetch(`${this.baseUrl}?action=uploadImage`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n});return await t.json()}async deleteListing(e){const n=await fetch(`${this.baseUrl}?action=deleteListing&listingId=${e}`,{method:"DELETE"}),t=await n.json();return this.listing=t,this.listing}async createListing(e,n,t,i,s,a){const o={id:Date.now(),title:e,price:n,expirationDate:t,description:i,location:s,image:a},r=await fetch(this.baseUrl+"?action=createListing",{method:"POST",body:JSON.stringify(o)}),c=await r.json();return this.listing=c,this.listing}async updateListing(e,n,t,i,s,a,o){const r={id:e,title:n,price:t,expirationDate:i,description:s,location:a,image:o},c=await fetch(this.baseUrl+"?action=updateListing",{method:"PUT",body:JSON.stringify(r)}),d=await c.json();return this.listings=d,this.listings}};class t{constructor(e){this.id=e,this.render()}render(){document.querySelector("#root").insertAdjacentHTML("beforeend",`\n      <section id="${this.id}" class="page">\n      <div class="start_container">\n        \x3c!--<img src="../img/start-bg.jpg" alt="Food" class="start-bg">--\x3e\n        <img src="https://images.squarespace-cdn.com/content/v1/5a009727268b9669e15efaef/1588107013662-EXYB18D83V962RKLDZGB/food+share.jpg?format=2500w" alt="Food" class="start-bg">\n        <div class="overlay"></div>\n\n        <div class="start_content">\n          <h1 class="start_text">Reduce your waste</h1>\n          <h1 class="start_text">Share your food</h1>\n            <div class="btn_container">\n              <button class="btn" onclick="location.href='/login'">Login</button>\n              <button class="btn" onclick="location.href='/signup'">Sign up</button>\n            </div>\n        </div>\n\n      </div>\n        \n        \n      </section>\n    `)}beforeShow(e){console.log(e)}}class i{constructor(e){this.id=e,this.render()}render(){document.querySelector("#root").insertAdjacentHTML("beforeend",`\n      <section id="${this.id}" class="page">\n        <header class="topbar">\n          <a href="/home"><img src="media/back.svg" alt="Arrow" class="back_btn"></a>\n        </header>\n        <div class="login_signup_container">\n          <div class="login_signup_img">\n            <img src="./media/signup.jpg" alt="Food" class="login_signup_bg">\n            <div class="half-overlay"></div>\n            <div class="login_signup_content">\n              <h2 class="login_signup_text">Share food with your community and fight against food waste<h2>\n            </div>\n          </div>\n        </div>\n\n        <div class="login_signup_container">\n            <h1 class="login_signup_headline">Signup</h1>\n            <div class="form_container">\n              \n            </div>\n          </div>\n      </section>\n    `)}beforeShow(e){console.log(e)}}class s{constructor(e){this.id=e,this.render()}render(){document.querySelector("#root").insertAdjacentHTML("beforeend",`\n      <section id="${this.id}" class="page">\n        <header class="topbar">\n          <a href="/home"><img src="media/back.svg" alt="Arrow" class="back_btn"></a>\n        </header>\n        <div class="login_signup_container">\n          <div class="login_signup_img">\n            <img src="./media/login.jpg" alt="Food" class="login_signup_bg">\n            <div class="half-overlay"></div>\n            <div class="login_signup_content">\n              <h2 class="login_signup_text">Share food with your community and fight against food waste<h2>\n            </div>\n          </div>\n        </div>\n\n        <div class="login_signup_container">\n            <h1 class="login_signup_headline">Login</h1>\n            <div class="form_container">\n              \n            </div>\n          </div>\n\n      </section>\n    `)}beforeShow(e){console.log(e)}}class a{constructor(e){this.id=e,this.render(),this.init()}render(){document.querySelector("#root").insertAdjacentHTML("beforeend",`\n      <section id="${this.id}" class="page">\n        <header class="topbar">\n          <h2>Home</h2>\n        </header>\n        <h3>Portfolio SPA Template</h3>\n        <p>My Single Page Web App Template</p>\n      </section>\n    `)}async init(){const e=await n.getListings();this.appendListings(e)}appendListings(e){let t="";for(const i of e)t+=`\n                <article data-listing-id="${i.id}">\n                    <img src="${n.baseUrl}/files/medium/${i.image||"placeholder.jpg"}">\n                    <h3>${i.title}</h3>\n                    <h4>${i.price}</h4>\n                    <h5>${i.location}</h5>\n                    <p>${i.description}</p>\n                    <p>${i.expirationDate}</p>\n                </article>\n            `;document.querySelector(`#${this.id} .listing-grid`).innerHTML=t,this.attachEvents()}attachEvents(){document.querySelectorAll(`#${this.id} [data-listing-id]`).forEach((e=>{e.onclick=()=>{const n=e.getAttribute("data-listing-id");b.navigateTo(`/listing/${n}`)}}))}beforeShow(e){e.listing&&this.appendListings(e.listings)}}class o{constructor(e){this.id=e,this.render()}render(){document.querySelector("#root").insertAdjacentHTML("beforeend",`\n      <section id="${this.id}" class="page">\n        <header class="topbar">\n          <h2>About</h2>\n        </header>\n        <h3>About me</h3>\n        <p>Some info about me. Enjoy!</p>\n      </section>\n    `)}beforeShow(e){console.log(e)}}class r{constructor(e){this.id=e,this.render()}render(){document.querySelector("#root").insertAdjacentHTML("beforeend",`\n      <section id="${this.id}" class="page">\n        <header class="topbar">\n          <div class="topbar_img>">\n          <a href="/home"><img src="media/back.svg" alt="Arrow" class="back_btn"></a>\n          </div>\n          <h2>About</h2>\n        </header>\n        <h3>About me</h3>\n        <p>Some info about me. Enjoy!</p>\n      </section>\n    `)}beforeShow(e){console.log(e)}}class c{constructor(e){this.id=e,this.render()}render(){document.querySelector("#root").insertAdjacentHTML("beforeend",`\n      <section id="${this.id}" class="page">\n        <header class="topbar">\n          <div class="topbar_img>">\n          <a href="/home"><img src="media/back.svg" alt="Arrow" class="back_btn"></a>\n          </div>\n          <h2>Chat</h2>\n        </header>\n        <div class="search_container"></div>\n        <div class="chat_container"></div>\n        \n      </section>\n    `)}beforeShow(e){console.log(e)}}class d{constructor(e){this.id=e,this.render()}render(){document.querySelector("#root").insertAdjacentHTML("beforeend",`\n      <section id="${this.id}" class="page">\n        <header class="topbar">\n          <div class="topbar_img>">\n          <a href="/home"><img src="media/back.svg" alt="Arrow" class="back_btn"></a>\n          </div>\n          <h2>Add New Listing</h2>\n        </header>\n        <section>\n          <form>\n            <img name="imagePreview" class="image-preview">\n            <input type="file" name="profileImage" accept="image/*">\n            <input type="text" name="title" placeholder="Title">\n            <input type="text" name="price" placeholder="Price">\n            <input type="text" name="expirationDate" placeholder="Expiration date">\n            <input type="text" name="description" placeholder="Description">\n            <input type="text" name="location" placeholder="Location">\n\n            <button type="button" class="save">Add listing</button>\n          </form>\n        </section>\n      </section>\n    `)}beforeShow(e){console.log(e)}}class l{constructor(e){this.id=e,this.render()}render(){document.querySelector("#root").insertAdjacentHTML("beforeend",`\n      <section id="${this.id}" class="page">\n        <header class="topbar">\n          <h2>Favourites</h2>\n        </header>\n        <h3>Portfolio SPA Template</h3>\n        <p>My Single Page Web App Template</p>\n      </section>\n    `)}beforeShow(e){console.log(e)}}class h{constructor(e){this.id=e,this.render()}render(){document.querySelector("#root").insertAdjacentHTML("beforeend",`\n      <section id="${this.id}" class="page">\n        <header class="topbar">\n          <h2>Profile</h2>\n        </header>\n        <h3>Portfolio SPA Template</h3>\n        <p>My Single Page Web App Template</p>\n      </section>\n    `)}beforeShow(e){console.log(e)}}class g{constructor(e){this.id=e,this.render()}render(){document.querySelector("#root").insertAdjacentHTML("beforeend",`\n      <section id="${this.id}" class="page">\n        <header class="topbar">\n          <h2>About</h2>\n        </header>\n        <h3>About me</h3>\n        <p>Some info about me. Enjoy!</p>\n      </section>\n    `)}beforeShow(e){console.log(e)}}class p{constructor(e){this.id=e,this.render()}render(){document.querySelector("#root").insertAdjacentHTML("beforeend",`\n      <section id="${this.id}" class="page">\n        <header class="topbar">\n          <h2>About</h2>\n        </header>\n        <h3>About me</h3>\n        <p>Some info about me. Enjoy!</p>\n      </section>\n    `)}beforeShow(e){console.log(e)}}class u{constructor(e){this.id=e,this.render()}render(){document.querySelector("#root").insertAdjacentHTML("beforeend",`\n      <section id="${this.id}" class="page">\n        <header class="topbar">\n          <h2>About</h2>\n        </header>\n        <h3>About me</h3>\n        <p>Some info about me. Enjoy!</p>\n      </section>\n    `)}beforeShow(e){console.log(e)}}class m{constructor(e){this.id=e,this.render()}render(){document.querySelector("#root").insertAdjacentHTML("beforeend",`\n      <section id="${this.id}" class="page">\n        <header class="topbar">\n          <h2>About</h2>\n        </header>\n        <h3>About me</h3>\n        <p>Some info about me. Enjoy!</p>\n      </section>\n    `)}beforeShow(e){console.log(e)}}class v{constructor(e){this.id=e,this.render()}render(){document.querySelector("#root").insertAdjacentHTML("beforeend",`\n      <section id="${this.id}" class="page">\n        <header class="topbar">\n          <h2>About</h2>\n        </header>\n        <h3>About me</h3>\n        <p>Some info about me. Enjoy!</p>\n      </section>\n    `)}beforeShow(e){console.log(e)}}var b=new class{constructor(){this.routes=[{path:"/",view:new t("start")},{path:"/signup",view:new i("signup")},{path:"/login",view:new s("login")},{path:"/home",view:new a("home")},{path:"/filter",view:new o("filter")},{path:"/product",view:new r("product")},{path:"/chat",view:new c("chat")},{path:"/add",view:new d("add")},{path:"/favourites",view:new l("favourites")},{path:"/profile",view:new h("profile")},{path:"/account",view:new g("account")},{path:"/impact",view:new p("impact")},{path:"/listings",view:new u("listings")},{path:"/purchases",view:new m("purchases")},{path:"/public",view:new v("public")}],this.pages,this.navLinks}init(){this.pages=document.querySelectorAll(".page"),this.navLinks=document.querySelectorAll("nav a"),this.attachNavLinkEvents(),window.addEventListener("popstate",(()=>this.showPage(location.pathname))),this.navigateTo(location.pathname)}hideAllPages(){for(const e of this.pages)e.style.display="none"}navigateTo(e,n){window.history.pushState({},e,e),this.showPage(e,n)}showPage(e,n={}){this.hideAllPages();const t=this.matchRoute(e,n);t.view.beforeShow(n),document.getElementById(t.view.id).style.display="block",this.setActiveTab(t.path)}matchRoute(e,n){return this.routes.find((t=>{if(t.path.includes("/:id")){const i=t.path.split("/:id")[0];if(e.includes(i))return n.id=e.split("/").pop(),t}else if(t.path.includes(e))return t}))}setActiveTab(e){for(const n of this.navLinks)e===n.getAttribute("href")?n.classList.add("active"):n.classList.remove("active")}attachNavLinkEvents(){const e=document.querySelectorAll(".router-link");for(const n of e)n.addEventListener("click",(e=>{const t=n.getAttribute("href");this.navigateTo(t),e.preventDefault()}))}goBack(){history.back()}};e.render(),b.init();
//# sourceMappingURL=index.fcf1236b.js.map
