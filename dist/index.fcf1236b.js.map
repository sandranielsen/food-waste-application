{"mappings":"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","sources":["src/components/nav.js","src/service.js","src/pages/start.js","src/pages/signup.js","src/pages/login.js","src/pages/home.js","src/pages/filter.js","src/pages/product-page.js","src/pages/chat.js","src/pages/add-listing.js","src/pages/favourites.js","src/pages/profile.js","src/pages/account.js","src/pages/my-impact.js","src/pages/my-listings.js","src/pages/my-purchases.js","src/pages/public-profile.js","src/router.js","src/app.js"],"sourcesContent":["class Nav {\r\n  constructor() {}\r\n\r\n  render() {\r\n    document.querySelector(\"#root\").insertAdjacentHTML(\r\n      \"afterbegin\",\r\n      /*html*/ `\r\n      <nav class=\"tabbar\">\r\n        <div class=\"nav_left\">\r\n          <a href=\"/home\" class=\"nav_item\"><img src=\"../img/home.svg\" alt=\"Home\" class=\"nav_img\"></a>\r\n          <a href=\"/chat\" class=\"nav_item\"><img src=\"../img/chat.svg\" alt=\"Chat\" class=\"nav_img\"></a>\r\n        </div>\r\n        <div class=\"nav_middle\">\r\n          <a href=\"/add\" class=\"nav_item_raised\"><img src=\"../img/add.svg\" alt=\"Plus\" class=\"nav_img_raised\"></a>\r\n        </div>\r\n        <div class=\"nav_right\">\r\n          <a href=\"/favourites\" class=\"nav_item\"><img src=\"../img/fav.svg\" alt=\"Heart\" class=\"nav_img\"></a>\r\n          <a href=\"/profile\" class=\"nav_item\"><img src=\"../img/profile.svg\" alt=\"Profile\" class=\"nav_img\"></a>\r\n        </div>\r\n      </nav>\r\n    `\r\n    );\r\n  }\r\n}\r\n\r\nconst nav = new Nav();\r\nexport default nav;\r\n","class Service {\r\n  constructor() {\r\n    this.listings = [];\r\n    this.baseUrl = \"\";\r\n  }\r\n\r\n  /* fetch and return all listings from backend service */\r\n  \r\n  async getListings() {\r\n    const url = `${this.baseUrl}?action=getListings`;\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n    this.listings = data;\r\n    return this.listings;\r\n  } \r\n\r\n\r\n  async getUser(userId) {\r\n    const url = `${this.baseUrl}?action=getUser&userId=${userId}`;\r\n    const response = await fetch(url);\r\n    const user = await response.json();\r\n    return user;\r\n  }\r\n  \r\n\r\n\r\n  async uploadImage(imageFile) {\r\n    let formData = new FormData();\r\n    formData.append(\"fileToUpload\", imageFile);\r\n\r\n    const response = await fetch(`${this.baseUrl}?action=uploadImage`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n      },\r\n      body: formData,\r\n    });\r\n    // waiting for the result\r\n    const result = await response.json();\r\n    return result;\r\n  }\r\n\r\n  \r\n\r\n  async deleteListing(listingId) {\r\n    const response = await fetch(\r\n      `${this.baseUrl}?action=deleteListing&listingId=${listingId}`,\r\n      {\r\n        method: \"DELETE\",\r\n      }\r\n    );\r\n    // waiting for the result\r\n    const result = await response.json();\r\n    // the result is the new updated listings array\r\n    this.listing = result;\r\n    return this.listing;\r\n  } \r\n\r\n  async createListing(title, price, expirationDate, description, location, image) {\r\n    const id = Date.now(); // dummy generated listing id\r\n    const newListing = {\r\n      // declaring a new js object with the form values\r\n      id,\r\n      title,\r\n      price,\r\n      expirationDate,\r\n      description,\r\n      location,\r\n      image,\r\n    };\r\n\r\n    // post new listing to php service using fetch(...)\r\n    const response = await fetch(this.baseUrl + \"?action=createListing\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(newListing), // parsing js object to json object\r\n    });\r\n    // waiting for the result\r\n    const result = await response.json();\r\n    // the result is the new updated listings array\r\n    this.listing = result;\r\n    return this.listing;\r\n  }\r\n\r\n  async updateListing(id, title, price, expirationDate, description, location, image) {\r\n    const listingToUpdate = {\r\n      // declaring a new js object with the form values\r\n      id,\r\n      title,\r\n      price,\r\n      expirationDate,\r\n      description,\r\n      location,\r\n      image\r\n    };\r\n    // put listing to php service using fetch(...)\r\n    const response = await fetch(this.baseUrl + \"?action=updateListing\", {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(listingToUpdate), // parsing js object to json object\r\n    });\r\n    // waiting for the result\r\n    const result = await response.json();\r\n    // the result is the new updated listings array\r\n    this.listings = result;\r\n    return this.listings;\r\n  }\r\n}\r\n\r\nconst service = new Service();\r\nexport default service;\r\n","import router from \"../router.js\";\r\nimport service from \"../service.js\";\r\n\r\nexport default class StartPage {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    document.querySelector(\"#root\").insertAdjacentHTML(\r\n      \"beforeend\",\r\n      /*html*/ `\r\n      <section id=\"${this.id}\" class=\"page\">\r\n      <div class=\"start_container\">\r\n        <!--<img src=\"../img/start-bg.jpg\" alt=\"Food\" class=\"start-bg\">-->\r\n        <img src=\"https://images.squarespace-cdn.com/content/v1/5a009727268b9669e15efaef/1588107013662-EXYB18D83V962RKLDZGB/food+share.jpg?format=2500w\" alt=\"Food\" class=\"start-bg\">\r\n        <div class=\"overlay\"></div>\r\n\r\n        <div class=\"start_content\">\r\n          <h1 class=\"start_text\">Reduce your waste</h1>\r\n          <h1 class=\"start_text\">Share your food</h1>\r\n            <div class=\"btn_container\">\r\n              <button class=\"btn\" onclick=\"location.href='/login'\">Login</button>\r\n              <button class=\"btn\" onclick=\"location.href='/signup'\">Sign up</button>\r\n            </div>\r\n        </div>\r\n\r\n      </div>\r\n        \r\n        \r\n      </section>\r\n    `\r\n    );\r\n  }\r\n\r\n  beforeShow(props) {\r\n    console.log(props);\r\n  }\r\n}\r\n","import router from \"../router.js\";\r\nimport service from \"../service.js\";\r\n\r\nexport default class SignUpPage {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    document.querySelector(\"#root\").insertAdjacentHTML(\r\n      \"beforeend\",\r\n      /*html*/ `\r\n      <section id=\"${this.id}\" class=\"page\">\r\n        <header class=\"topbar\">\r\n          <a href=\"/home\"><img src=\"media/back.svg\" alt=\"Arrow\" class=\"back_btn\"></a>\r\n        </header>\r\n        <div class=\"login_signup_container\">\r\n          <div class=\"login_signup_img\">\r\n            <img src=\"./media/signup.jpg\" alt=\"Food\" class=\"login_signup_bg\">\r\n            <div class=\"half-overlay\"></div>\r\n            <div class=\"login_signup_content\">\r\n              <h2 class=\"login_signup_text\">Share food with your community and fight against food waste<h2>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"login_signup_container\">\r\n            <h1 class=\"login_signup_headline\">Signup</h1>\r\n            <div class=\"form_container\">\r\n              \r\n            </div>\r\n          </div>\r\n      </section>\r\n    `\r\n    );\r\n  }\r\n\r\n  beforeShow(props) {\r\n    console.log(props);\r\n  }\r\n}\r\n","import router from \"../router.js\";\r\nimport service from \"../service.js\";\r\n\r\nexport default class LogInPage {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    document.querySelector(\"#root\").insertAdjacentHTML(\r\n      \"beforeend\",\r\n      /*html*/ `\r\n      <section id=\"${this.id}\" class=\"page\">\r\n        <header class=\"topbar\">\r\n          <a href=\"/home\"><img src=\"media/back.svg\" alt=\"Arrow\" class=\"back_btn\"></a>\r\n        </header>\r\n        <div class=\"login_signup_container\">\r\n          <div class=\"login_signup_img\">\r\n            <img src=\"./media/login.jpg\" alt=\"Food\" class=\"login_signup_bg\">\r\n            <div class=\"half-overlay\"></div>\r\n            <div class=\"login_signup_content\">\r\n              <h2 class=\"login_signup_text\">Share food with your community and fight against food waste<h2>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"login_signup_container\">\r\n            <h1 class=\"login_signup_headline\">Login</h1>\r\n            <div class=\"form_container\">\r\n              \r\n            </div>\r\n          </div>\r\n\r\n      </section>\r\n    `\r\n    );\r\n  }\r\n\r\n  beforeShow(props) {\r\n    console.log(props);\r\n  }\r\n}\r\n","import router from \"../router.js\";\r\nimport service from \"../service.js\";\r\n\r\nexport default class HomePage {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.render();\r\n    this.init();\r\n  }\r\n\r\n  render() {\r\n    document.querySelector(\"#root\").insertAdjacentHTML(\r\n      \"beforeend\",\r\n      /*html*/ `\r\n      <section id=\"${this.id}\" class=\"page\">\r\n        <header class=\"topbar\">\r\n          <h2>Home</h2>\r\n        </header>\r\n        <h3>Portfolio SPA Template</h3>\r\n        <p>My Single Page Web App Template</p>\r\n      </section>\r\n    `\r\n    );\r\n  }\r\n\r\n  async init() {\r\n    const listings = await service.getListings();\r\n    this.appendListings(listings);\r\n  }\r\n\r\n  appendListings(listings) {\r\n    let htmlTemplate = \"\";\r\n    for (const listing of listings) {\r\n      htmlTemplate += /*html*/ `\r\n                <article data-listing-id=\"${listing.id}\">\r\n                    <img src=\"${service.baseUrl}/files/medium/${\r\n        listing.image || \"placeholder.jpg\"\r\n      }\">\r\n                    <h3>${listing.title}</h3>\r\n                    <h4>${listing.price}</h4>\r\n                    <h5>${listing.location}</h5>\r\n                    <p>${listing.description}</p>\r\n                    <p>${listing.expirationDate}</p>\r\n                </article>\r\n            `;\r\n    }\r\n    document.querySelector(`#${this.id} .listing-grid`).innerHTML =\r\n      htmlTemplate;\r\n    this.attachEvents();\r\n  }\r\n\r\n  attachEvents() {\r\n    document\r\n      .querySelectorAll(`#${this.id} [data-listing-id]`)\r\n      .forEach((element) => {\r\n        element.onclick = () => {\r\n          const listingId = element.getAttribute(\"data-listing-id\");\r\n          router.navigateTo(`/listing/${listingId}`);\r\n        };\r\n      });\r\n  }\r\n\r\n  beforeShow(props) {\r\n    if (props.listing) {\r\n      this.appendListings(props.listings);\r\n    }\r\n  }\r\n}\r\n","import router from \"../router.js\";\r\nimport service from \"../service.js\";\r\n\r\nexport default class FilterPage {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    document.querySelector(\"#root\").insertAdjacentHTML(\r\n      \"beforeend\",\r\n      /*html*/ `\r\n      <section id=\"${this.id}\" class=\"page\">\r\n        <header class=\"topbar\">\r\n          <h2>About</h2>\r\n        </header>\r\n        <h3>About me</h3>\r\n        <p>Some info about me. Enjoy!</p>\r\n      </section>\r\n    `\r\n    );\r\n  }\r\n\r\n  beforeShow(props) {\r\n    console.log(props);\r\n  }\r\n}\r\n","import router from \"../router.js\";\r\nimport service from \"../service.js\";\r\n\r\nexport default class ProductPage {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    document.querySelector(\"#root\").insertAdjacentHTML(\r\n      \"beforeend\",\r\n      /*html*/ `\r\n      <section id=\"${this.id}\" class=\"page\">\r\n        <header class=\"topbar\">\r\n          <div class=\"topbar_img>\">\r\n          <a href=\"/home\"><img src=\"media/back.svg\" alt=\"Arrow\" class=\"back_btn\"></a>\r\n          </div>\r\n          <h2>About</h2>\r\n        </header>\r\n        <h3>About me</h3>\r\n        <p>Some info about me. Enjoy!</p>\r\n      </section>\r\n    `\r\n    );\r\n  }\r\n\r\n  beforeShow(props) {\r\n    console.log(props);\r\n  }\r\n}\r\n","import router from \"../router.js\";\r\nimport service from \"../service.js\";\r\n\r\nexport default class ChatPage {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    document.querySelector(\"#root\").insertAdjacentHTML(\r\n      \"beforeend\",\r\n      /*html*/ `\r\n      <section id=\"${this.id}\" class=\"page\">\r\n        <header class=\"topbar\">\r\n          <div class=\"topbar_img>\">\r\n          <a href=\"/home\"><img src=\"media/back.svg\" alt=\"Arrow\" class=\"back_btn\"></a>\r\n          </div>\r\n          <h2>Chat</h2>\r\n        </header>\r\n        <div class=\"search_container\"></div>\r\n        <div class=\"chat_container\"></div>\r\n        \r\n      </section>\r\n    `\r\n    );\r\n  }\r\n\r\n  beforeShow(props) {\r\n    console.log(props);\r\n  }\r\n}\r\n","import router from \"../router.js\";\r\nimport service from \"../service.js\";\r\n\r\nexport default class AddListingPage {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.render();\r\n/*\r\n    this.imagePreview = document.querySelector(\r\n      `#${this.id} [name=\"imagePreview\"]`\r\n    );\r\n    this.titleInput = document.querySelector(`#${this.id} [name=\"title\"]`);\r\n    this.priceInput = document.querySelector(`#${this.id} [name=\"price\"]`);\r\n    this.expirationDateInput = document.querySelector(\r\n      `#${this.id} [name=\"expirationDate\"]`\r\n    );\r\n    this.descriptionInput = document.querySelector(\r\n      `#${this.id} [name=\"description\"]`\r\n    );\r\n    this.locationInput = document.querySelector(\r\n      `#${this.id} [name=\"location\"]`\r\n    );\r\n\r\n    this.attachEvents();\r\n    */\r\n  }\r\n\r\n  render() {\r\n    document.querySelector(\"#root\").insertAdjacentHTML(\r\n      \"beforeend\",\r\n      /*html*/ `\r\n      <section id=\"${this.id}\" class=\"page\">\r\n        <header class=\"topbar\">\r\n          <div class=\"topbar_img>\">\r\n          <a href=\"/home\"><img src=\"media/back.svg\" alt=\"Arrow\" class=\"back_btn\"></a>\r\n          </div>\r\n          <h2>Add New Listing</h2>\r\n        </header>\r\n        <section>\r\n          <form>\r\n            <img name=\"imagePreview\" class=\"image-preview\">\r\n            <input type=\"file\" name=\"profileImage\" accept=\"image/*\">\r\n            <input type=\"text\" name=\"title\" placeholder=\"Title\">\r\n            <input type=\"text\" name=\"price\" placeholder=\"Price\">\r\n            <input type=\"text\" name=\"expirationDate\" placeholder=\"Expiration date\">\r\n            <input type=\"text\" name=\"description\" placeholder=\"Description\">\r\n            <input type=\"text\" name=\"location\" placeholder=\"Location\">\r\n\r\n            <button type=\"button\" class=\"save\">Add listing</button>\r\n          </form>\r\n        </section>\r\n      </section>\r\n    `\r\n    );\r\n  }\r\n\r\n  /* Attaching events to DOM elements. \r\n  attachEvents() {\r\n    this.imageInput.onchange = () => this.previewImage(); // on change event on the input file (image) field\r\n    document.querySelector(`#${this.id} .save`).onclick = () => this.create(); // on click event for save button\r\n  }\r\n\r\n  previewImage() {\r\n    const file = this.imageInput.files[0];\r\n    if (file) {\r\n      let reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        this.imagePreview.setAttribute(\"src\", event.target.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  }\r\n\r\n  async create() {\r\n    if (this.validate()) {\r\n      const image = await service.uploadImage(this.imageInput.files[0]);\r\n      const listings = await service.createListing(\r\n        this.titleInput.value,\r\n        this.priceInput.value,\r\n        this.expirationDateInput.value,\r\n        this.descriptionInput.value,\r\n        this.locationInput.value,\r\n        image.name\r\n      );\r\n      router.navigateTo(\"/\", { home: home });\r\n    }\r\n  }\r\n\r\n  validate() {\r\n    if (\r\n      this.titleInput.value &&\r\n      this.priceInput.value &&\r\n      this.expirationDateInput.value &&\r\n      this.descriptionInput.value &&\r\n      this.locationInput.value &&\r\n      this.imageInput.files[0]\r\n    ) {\r\n      return true;\r\n    } else {\r\n      alert(\"Please, fill in all fields.\");\r\n      return false;\r\n    }\r\n  } */\r\n\r\n  beforeShow(props) {\r\n    console.log(props);\r\n  }\r\n}\r\n","import router from \"../router.js\";\r\nimport service from \"../service.js\";\r\n\r\nexport default class FavouritesPage {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    document.querySelector(\"#root\").insertAdjacentHTML(\r\n      \"beforeend\",\r\n      /*html*/ `\r\n      <section id=\"${this.id}\" class=\"page\">\r\n        <header class=\"topbar\">\r\n          <h2>Favourites</h2>\r\n        </header>\r\n        <h3>Portfolio SPA Template</h3>\r\n        <p>My Single Page Web App Template</p>\r\n      </section>\r\n    `\r\n    );\r\n  }\r\n\r\n  beforeShow(props) {\r\n    console.log(props);\r\n  }\r\n}\r\n","import router from \"../router.js\";\r\nimport service from \"../service.js\";\r\n\r\nexport default class ProfilePage {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    document.querySelector(\"#root\").insertAdjacentHTML(\r\n      \"beforeend\",\r\n      /*html*/ `\r\n      <section id=\"${this.id}\" class=\"page\">\r\n        <header class=\"topbar\">\r\n          <h2>Profile</h2>\r\n        </header>\r\n        <h3>Portfolio SPA Template</h3>\r\n        <p>My Single Page Web App Template</p>\r\n      </section>\r\n    `\r\n    );\r\n  }\r\n\r\n  beforeShow(props) {\r\n    console.log(props);\r\n  }\r\n}\r\n","import router from \"../router.js\";\r\nimport service from \"../service.js\";\r\n\r\nexport default class AccountPage {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    document.querySelector(\"#root\").insertAdjacentHTML(\r\n      \"beforeend\",\r\n      /*html*/ `\r\n      <section id=\"${this.id}\" class=\"page\">\r\n        <header class=\"topbar\">\r\n          <h2>About</h2>\r\n        </header>\r\n        <h3>About me</h3>\r\n        <p>Some info about me. Enjoy!</p>\r\n      </section>\r\n    `\r\n    );\r\n  }\r\n\r\n  beforeShow(props) {\r\n    console.log(props);\r\n  }\r\n}\r\n","import router from \"../router.js\";\r\nimport service from \"../service.js\";\r\n\r\nexport default class MyImpactPage {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    document.querySelector(\"#root\").insertAdjacentHTML(\r\n      \"beforeend\",\r\n      /*html*/ `\r\n      <section id=\"${this.id}\" class=\"page\">\r\n        <header class=\"topbar\">\r\n          <h2>About</h2>\r\n        </header>\r\n        <h3>About me</h3>\r\n        <p>Some info about me. Enjoy!</p>\r\n      </section>\r\n    `\r\n    );\r\n  }\r\n\r\n  beforeShow(props) {\r\n    console.log(props);\r\n  }\r\n}\r\n","import router from \"../router.js\";\r\nimport service from \"../service.js\";\r\n\r\nexport default class MyListingsPage {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    document.querySelector(\"#root\").insertAdjacentHTML(\r\n      \"beforeend\",\r\n      /*html*/ `\r\n      <section id=\"${this.id}\" class=\"page\">\r\n        <header class=\"topbar\">\r\n          <h2>About</h2>\r\n        </header>\r\n        <h3>About me</h3>\r\n        <p>Some info about me. Enjoy!</p>\r\n      </section>\r\n    `\r\n    );\r\n  }\r\n\r\n  beforeShow(props) {\r\n    console.log(props);\r\n  }\r\n}\r\n","import router from \"../router.js\";\r\nimport service from \"../service.js\";\r\n\r\nexport default class MyPurchasesPage {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    document.querySelector(\"#root\").insertAdjacentHTML(\r\n      \"beforeend\",\r\n      /*html*/ `\r\n      <section id=\"${this.id}\" class=\"page\">\r\n        <header class=\"topbar\">\r\n          <h2>About</h2>\r\n        </header>\r\n        <h3>About me</h3>\r\n        <p>Some info about me. Enjoy!</p>\r\n      </section>\r\n    `\r\n    );\r\n  }\r\n\r\n  beforeShow(props) {\r\n    console.log(props);\r\n  }\r\n}\r\n","import router from \"../router.js\";\r\nimport service from \"../service.js\";\r\n\r\nexport default class PublicProfilePage {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    document.querySelector(\"#root\").insertAdjacentHTML(\r\n      \"beforeend\",\r\n      /*html*/ `\r\n      <section id=\"${this.id}\" class=\"page\">\r\n        <header class=\"topbar\">\r\n          <h2>About</h2>\r\n        </header>\r\n        <h3>About me</h3>\r\n        <p>Some info about me. Enjoy!</p>\r\n      </section>\r\n    `\r\n    );\r\n  }\r\n\r\n  beforeShow(props) {\r\n    console.log(props);\r\n  }\r\n}\r\n","import StartPage from \"./pages/start.js\";\r\nimport SignUpPage from \"./pages/signup.js\";\r\nimport LogInPage from \"./pages/login.js\";\r\nimport HomePage from \"./pages/home.js\";\r\nimport FilterPage from \"./pages/filter.js\";\r\nimport ProductPage from \"./pages/product-page.js\";\r\nimport ChatPage from \"./pages/chat.js\";\r\nimport AddListingPage from \"./pages/add-listing.js\";\r\nimport FavouritesPage from \"./pages/favourites.js\";\r\nimport ProfilePage from \"./pages/profile.js\";\r\nimport AccountPage from \"./pages/account.js\";\r\nimport MyImpactPage from \"./pages/my-impact.js\";\r\nimport MyListingsPage from \"./pages/my-listings.js\";\r\nimport MyPurchasesPage from \"./pages/my-purchases.js\";\r\nimport PublicProfilePage from \"./pages/public-profile.js\";\r\n\r\nclass Router {\r\n  constructor() {\r\n    this.routes = [\r\n      {\r\n        path: \"/\", // path to the view/page component\r\n        view: new StartPage(\"start\"), // an instance of the view/page\r\n      },\r\n      {\r\n        path: \"/signup\",\r\n        view: new SignUpPage(\"signup\"),\r\n      },\r\n      {\r\n        path: \"/login\",\r\n        view: new LogInPage(\"login\"),\r\n      },\r\n      {\r\n        path: \"/home\",\r\n        view: new HomePage(\"home\"),\r\n      },\r\n      {\r\n        path: \"/filter\",\r\n        view: new FilterPage(\"filter\"),\r\n      },\r\n      {\r\n        path: \"/product\",\r\n        view: new ProductPage(\"product\"),\r\n      },\r\n      {\r\n        path: \"/chat\",\r\n        view: new ChatPage(\"chat\"),\r\n      },\r\n      {\r\n        path: \"/add\",\r\n        view: new AddListingPage(\"add\"),\r\n      },\r\n      {\r\n        path: \"/favourites\",\r\n        view: new FavouritesPage(\"favourites\"),\r\n      },\r\n      {\r\n        path: \"/profile\",\r\n        view: new ProfilePage(\"profile\"),\r\n      },\r\n      {\r\n        path: \"/account\",\r\n        view: new AccountPage(\"account\"),\r\n      },\r\n      {\r\n        path: \"/impact\",\r\n        view: new MyImpactPage(\"impact\"),\r\n      },\r\n      {\r\n        path: \"/listings\",\r\n        view: new MyListingsPage(\"listings\"),\r\n      },\r\n      {\r\n        path: \"/purchases\",\r\n        view: new MyPurchasesPage(\"purchases\"),\r\n      },\r\n      {\r\n        path: \"/public\",\r\n        view: new PublicProfilePage(\"public\"),\r\n      },\r\n\r\n      /*\r\n      {\r\n        path: \"/update/:id\",\r\n        view: new UpdatePage(\"update\"),\r\n      },\r\n      {\r\n        path: \"/user/:id\",\r\n        view: new UserProfilePage(\"profile\"),\r\n      },\r\n      */\r\n    ];\r\n    //declaring properties: pages and navLinks. Initialised in init().\r\n    this.pages;\r\n    this.navLinks;\r\n  }\r\n\r\n  /* Initialising the router, calling attachNavLinkEvents(), popstate event and navigateTo() */\r\n  init() {\r\n    this.pages = document.querySelectorAll(\".page\");\r\n    this.navLinks = document.querySelectorAll(\"nav a\");\r\n    this.attachNavLinkEvents();\r\n    window.addEventListener(\"popstate\", () => this.showPage(location.pathname)); // change page when using back and forth in browser\r\n    this.navigateTo(location.pathname);\r\n  }\r\n\r\n  /* Changing display to none for all pages */\r\n  hideAllPages() {\r\n    for (const page of this.pages) {\r\n      page.style.display = \"none\";\r\n    }\r\n  }\r\n\r\n  /* Navigating SPA to specific page by given path - props can be passed from one component (page) to another through the router.navigateTo */\r\n  navigateTo(path, props) {\r\n    window.history.pushState({}, path, path);\r\n    this.showPage(path, props);\r\n  }\r\n\r\n  showPage(path, props = {}) {\r\n    this.hideAllPages(); // hide all pages\r\n    const route = this.matchRoute(path, props); // finds a matching route by the path\r\n    route.view.beforeShow(props); // before we display the page, beforeShow is called inside of the page. By that we can execute stuff and use passed props (properties).\r\n    document.getElementById(route.view.id).style.display = \"block\"; // chaning display to block of the view (page)\r\n    this.setActiveTab(route.path);\r\n  }\r\n\r\n  /* Returns a route from this.routes matching the path name - based on the path. */\r\n  matchRoute(path, props) {\r\n    const route = this.routes.find((route) => {\r\n      if (route.path.includes(\"/:id\")) {\r\n        const mainRoute = route.path.split(\"/:id\")[0];\r\n        if (path.includes(mainRoute)) {\r\n          props.id = path.split(\"/\").pop();\r\n          return route;\r\n        }\r\n      } else if (route.path.includes(path)) {\r\n        return route;\r\n      }\r\n    });\r\n\r\n    return route;\r\n  }\r\n\r\n  /* Sets active menu item by given path */\r\n  setActiveTab(path) {\r\n    for (const link of this.navLinks) {\r\n      if (path === link.getAttribute(\"href\")) {\r\n        link.classList.add(\"active\");\r\n      } else {\r\n        link.classList.remove(\"active\");\r\n      }\r\n    }\r\n  }\r\n\r\n  /* Attaching event to nav links and preventing default anchor link event */\r\n  attachNavLinkEvents() {\r\n    const navLinks = document.querySelectorAll(\".router-link\");\r\n    for (const link of navLinks) {\r\n      link.addEventListener(\"click\", (event) => {\r\n        const path = link.getAttribute(\"href\");\r\n        this.navigateTo(path);\r\n        event.preventDefault();\r\n      });\r\n    }\r\n  }\r\n\r\n  goBack() {\r\n    history.back();\r\n  }\r\n}\r\n\r\nconst router = new Router();\r\nexport default router;\r\n","import nav from \"./components/nav.js\";\r\nimport router from \"./router.js\";\r\n\r\nnav.render();\r\nrouter.init();\r\n"],"names":["render","document","querySelector","insertAdjacentHTML","$657864d8bd2bdfd0$export$2e2bcd8739ae039","this","listings","baseUrl","async","url","response","fetch","data","json","userId","imageFile","formData","FormData","append","method","headers","body","listingId","result","listing","title","price","expirationDate","description","location","image","newListing","Date","now","JSON","stringify","id","title1","price1","expirationDate1","description1","location1","image1","listingToUpdate","init","getListings","appendListings","htmlTemplate","$a54b9e99f927b465$export$2e2bcd8739ae039","routes","path","view","$62e942d399e39d1c$export$2e2bcd8739ae039","$128775928235b969$export$2e2bcd8739ae039","$5cd448b0bab7cca1$export$2e2bcd8739ae039","$d5ad7b98551741fb$export$2e2bcd8739ae039","$b468cbc1c80ef9f0$export$2e2bcd8739ae039","$286bd44412082353$export$2e2bcd8739ae039","$7699090b6c9fd270$export$2e2bcd8739ae039","$55b02a7520a8266f$export$2e2bcd8739ae039","$6482415e5a1e25ff$export$2e2bcd8739ae039","$8cb2d22f382c1c35$export$2e2bcd8739ae039","$a645c8d485a09592$export$2e2bcd8739ae039","$b9361f4c32fdac23$export$2e2bcd8739ae039","$6ca89dde483200fa$export$2e2bcd8739ae039","$b3a1ad803ce6ba05$export$2e2bcd8739ae039","$41440ac57a7644dc$export$2e2bcd8739ae039","pages","navLinks","querySelectorAll","attachNavLinkEvents","window","addEventListener","showPage","pathname","navigateTo","hideAllPages","page","style","display","path4","props","history","pushState","path1","props1","route","matchRoute","beforeShow","getElementById","setActiveTab","path2","props2","find","includes","mainRoute","split","pop","path3","link","getAttribute","classList","add","remove","event","preventDefault","goBack","back","$c54f200cc005338c$export$2e2bcd8739ae039"],"version":3,"file":"index.fcf1236b.js.map"}